package mong.testroom1;import java.io.BufferedReader;import java.io.DataInputStream;import java.io.File;import java.io.FileInputStream;import java.io.FileWriter;import java.io.IOException;import java.io.InputStreamReader;import java.net.URLDecoder;import java.util.regex.Matcher;import java.util.regex.Pattern;public class EncodingEuckr {		/**	 * @param args	 * @throws IOException 	 */	public static void main(String[] args) throws IOException {		if(args.length == 0){			System.out.println("Argup[0] is must input");			//return;		}						Thread t = new Thread(){			public void run(){				try {					while (!Thread.interrupted()) {						Thread.sleep(1000);						System.out.print(".");					}				} catch (InterruptedException e) {					// TODO: handle exception				}			}		};				t.setDaemon(true);		t.start();						String filePath = "/Users/acacia99/works/search/data/";		//String filePath = "/wiselog/rawdata/" + args[0] + "/";		FileInputStream fis = null;		DataInputStream in = null;		BufferedReader br = null;				File[] listFile = new File(filePath).listFiles(); 				FileWriter writer = null;		//writer = new FileWriter("/wiselog/rawdata/keyword/keyword_"+args[0]+".txt");		try {			for (int i = 0; i < listFile.length; i++) {								if(listFile[i].isFile() && listFile[i].getName().indexOf("eshop1_13041710.log") > -1){									fis = new FileInputStream(filePath+listFile[i].getName());					in = new DataInputStream(fis);					br = new BufferedReader(new InputStreamReader(in));										String strLine;					int cnt = 0;										while((strLine=br.readLine()) != null){												Pattern p1 = Pattern.compile("GET\\s*(http|https|ftp)://[a-zA-z]+.gsshop.com/search/main.gs\\?tq=([^\\s^]+)\\s*HTTP");						Matcher m1 = p1.matcher(strLine);						if(m1.find()){														//if(cnt == 3)								//break;														//cnt++;														String str = m1.group();							//str = URLDecoder.decode(str, "euc-kr");							str = str.substring(str.indexOf("search/main.gs?tq=")+"search/main.gs?tq=".length());							str = str.replaceAll("HTTP", "");							//str = new String(str.getBytes(), "euc-kr");														if(str.indexOf("&") > -1){								String [] strTok = str.split("&");								str = strTok[0];							}							System.out.println("str1:"+str);							System.out.println("str2:"+new String(str.getBytes(), "utf-8"));							String newStr = new String(str.getBytes(), "utf-8");							//System.out.println("new STr:" + new String(newStr.getBytes("utf-8"), "euc-kr"));														str = URLDecoder.decode(str, "euc-kr");														System.out.println("Last str:"+str);														//writer.write(str+"\n");						}					}					//System.out.println("listFile["+i+"].getName():"+listFile[i].getName());				}			}						} catch (Exception e) {			System.out.println(e.getMessage());		} finally {			br.close();			in.close();			fis.close();						if(writer != null){				writer.close();			}			t.interrupt();		}	}}